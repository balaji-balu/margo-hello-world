initial_state: idle

events:
  - name: receive_request
    src: ["idle"]
    dst: pending
  - name: verify_success
    src: ["pending"]
    dst: send_to_edge
  - name: verify_failed
    src: ["pending"]
    dst: failed
  - name: edge_accepted
    src: ["send_to_edge"]
    dst: in_progress
  - name: edge_rejected
    src: ["send_to_edge"]
    dst: failed
  - name: edge_progress
    src: ["in_progress"]
    dst: in_progress
  - name: edge_complete
    src: ["in_progress"]
    dst: completed
  - name: edge_failed
    src: ["in_progress"]
    dst: rollback
  - name: rollback_done
    src: ["rollback"]
    dst: failed
  - name: connectivity_lost
    src: ["in_progress"]
    dst: degraded
  - name: reconnect
    src: ["degraded"]
    dst: in_progress
  - name: report_complete
    src: ["completed"]
    dst: idle
  - name: "no_edges"
    src: ["pending"]
    dst: idle




callbacks:
  enter_pending: "Received deployment request from CO"
  enter_send_to_edge: "Verifying deployment and preparing Edge request"
  enter_in_progress: "Deployment started on Edge node"
  enter_completed: "Deployment successfully completed"
  enter_failed: "Deployment failed or verification failed"
  enter_idle: "Ready for next deployment"
  enter_no_edges: "No Edges found"
